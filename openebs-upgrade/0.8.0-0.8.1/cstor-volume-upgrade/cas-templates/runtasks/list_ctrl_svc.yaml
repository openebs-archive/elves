apiVersion: openebs.io/v1alpha1
kind: RunTask
metadata:
  name: list-ctrl-svc
  namespace: default
spec:
  meta: |
    id: listctrlservice
    apiVersion: v1
    kind: Service
    action: list
    runNamespace: {{.Config.namespace.value}}
    options: |-
      labelSelector: openebs.io/persistent-volume={{ .Config.pvName.value }},openebs.io/target-service=cstor-target-svc
  post: |-
    '{{- jsonpath .JsonResult "{.items[*].metadata.name}" | trim | saveAs "ctrl_svc" .TaskResult | noop -}}'


---
# mayaonline can parse this yaml to obtain tests specific to applications (based on tag) & populate test params,
# fulfill pre-requisites etc, before deployment. The params are explicitly typed to prompt right values from user.
# Test parameters can be of different kinds such as ENV, configmap etc., with their own properties.
# '@userdata' is a placeholder which is either autofilled/userfilled. If empty, use defaults. The test has tags which
# will help with categorization & application-mapping


litmus_test_1:
  name: pod_kill
  test_tags: ['mysql', 'pumba']
  location: https://raw.githubusercontent.com/openebs/litmus/master/apps/percona/tests/mysql_data_persistence/run_litmus_test.yaml
  test_params:
    - name: DB_SERVER_IP
      kind: env
      type: string 
      value: '@userdata'
      default: 10.20.10.100
    - name: DB_USER
      kind: env
      type: string 
      value: '@userdata'
      default: root 
    - name: DB_PASSWORD
      kind: env
      type: string 
      value: '@userdata'
      default: k8sDem0
    - name: CHAOS_DURATION
      kind: env
      type: integer
      value: '@userdata'
      default: 120 
        # In pod spec this still needs to be quoted/taken as string (https://github.com/kubernetes/kubernetes/issues/2763) 
  
litmus_test_2:
  name: node_taint
  test_tags: ['mysql', 'pumba']
  location: https://raw.githubusercontent.com/openebs/litmus/master/apps/percona/tests/mysql_data_persistence/run_litmus_test.yaml
  test_params: 
    - name: DB_SERVER_IP 
      kind: env
      type: string
      value: '@userdata'
      default: 10.20.10.100
    - name: DB_USER
      kind: env
      type: string
      value: '@userdata'
      default: root 
    - name: DB_PASSWORD
      kind: env
      type: string
      value: '@userdata'
      default: k8sDem0
    - name: TAINT_type
      kind: env
      type: integer
      value: '@userdata'
      default: diskpressure 
    - name: tpcc.conf
      kind: configmap
      data: 
        tpcc.conf: |-
          warehouses: 10
          connections: 10
